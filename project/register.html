<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <title>Document</title>
</head>
<body>
    
    <style>
.container{

display: flex;
justify-content: center;
align-items: center;
height: 100vh;


}

    </style>
<div class="container">
    <form id="signupForm">
        <div class="mb-3">

            <!-- <h1>Sign Up</h1> -->
          <label for="exampleInputEmail1" class="form-label">Email address</label>
          <input type="email" class="form-control" id="email" aria-describedby="emailHelp">
          <div id="emailHelp" class="form-text">We'll never share your email with anyone else.</div>
        </div>
        <div class="mb-3">
          <label for="exampleInputPassword1" class="form-label">Password</label>
          <input type="password" class="form-control" id="password">
        </div>
        <div class="mb-3">
            <label for="exampleInputPassword1" class="form-label">Confirm Password</label>
            <input type="password" class="form-control" id="exampleInputPassword1">
          </div>
        <div class="mb-3 form-check">
          <input type="checkbox" class="form-check-input" id="exampleCheck1">
          <label class="form-check-label" for="exampleCheck1">I agree to <a href="#">terms & conditions</a></label>
        </div>
        <button type="submit"  id="registerBtn"class="btn btn-primary form-control">Submit</button>
      </form>

    </div>

    
</body>


<script>

 
    async function fetchUser() {
          const response = await $.ajax({
            type: "GET",
            url: '  https://stoxhaven-688a7149e245.herokuapp.com/users',
            dataType: "json",
            timeout: 30000,
          });
    
          console.log(response.data);
          return response.data
        }
    
       
        
        $(document).ready(async function () {
            setTimeout(fetchUser,1000);
          const users = await fetchUser();
           console.log(users)
        })
        </script>    

  <script>
    var btn=document.getElementById('registerBtn');
   function red () {
           btn.style.opacity="1"
           btn.innerHTML="Register"
   
                          }
                          function topFunction() {
document.body.scrollTop = 0; // For Safari
document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
}
   
   function blurr (){
       
       btn.style.opacity="0.5"
       btn.innerHTML= "Loading . . ."
      
   }
   
           async function registerUser(values) {
               await $.ajax({
                   type: "POST",
                   url: " https://stoxhaven-688a7149e245.herokuapp.com/auth/register",
                   dataType: "json",
                   data: { ...values },
                   timeout: 30000,
                   success: function (data) {
                        console.log(data);
                    //    $('.live-section').html("Account was successfully created").addClass('alert-success')
                    alert("Registeration successful!")
                    // Swal.fire({
                    //                     icon: 'success',
                    //                     text: 'Registeration successful!',
                    //                     confirmButtonText: 'OK',
                    //                     confirmButtonColor: '#3a64d1',
                    //                     allowOutsideClick: true,
                    //                     allowEscapeKey: true,
                    //                 });
                       setTimeout(function () {
                           $(location).prop('href', '../otp.html')
                       }, 1000)
   
                   },
                   error: function (xhr, status, error) {
                       red();
                       console.log(error);
                    //    $('.live-section').html("Email already taken.").addClass('alert-danger')
                    Swal.fire({
                                        icon: 'error',
                                        text: 'Email already taken!',
                                        confirmButtonText: 'OK',
                                        confirmButtonColor: '#3a64d1',
                                        allowOutsideClick: true,
                                        allowEscapeKey: true,
                                    });
                   }
               });
   
           }
   
   
           $('#registerBtn').click(function (e) {
               e.preventDefault(); // prevents page reload
               blurr();
               const firstName ="Admin"
               const lastName = "Testing"
               const email = $('#email').val();
               const password = $('#password').val();
               const country = "usa";
               const referralCode = $('#referralCode').val();
   
               localStorage.setItem("password",password)
               localStorage.setItem("email",email)
             
               localStorage.setItem("firstName",firstName)
               
               console.log(email,password,firstName,lastName,country,referralCode);
               registerUser({ email, password, firstName, lastName, country,referralCode });
           });

         topFunction();

   
       </script>

       <!---this code below inplements alerts-->
<script>



</html>